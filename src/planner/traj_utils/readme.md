## 1. **planning_visualization.h / planning_visualization.cpp**

### 主要功能：
**轨迹规划可视化工具** - 用于在RViz中可视化显示各种规划结果

### 核心作用：
- **显示目标点**：在3D空间中显示规划的目标位置
- **路径可视化**：
  - 全局路径显示
  - 初始路径显示  
  - 优化后路径显示
  - A*搜索路径显示
- **多路径管理**：支持同时显示多条候选路径
- **箭头指示**：显示方向向量和引导向量

### 关键技术：
- 使用 `visualization_msgs::Marker` 和 `MarkerArray` 在RViz中创建可视化元素
- 支持球体、线条、箭头等多种可视化标记
- 颜色、尺寸、透明度可配置
- 支持动态更新和清除

## 2. **plan_container.h**

### 主要功能：
**轨迹数据容器和管理器** - 定义和管理全局轨迹、局部轨迹的数据结构

### 核心组件：

#### **GlobalTrajData 类**：
- **全局轨迹管理**：存储多项式全局轨迹
- **局部轨迹管理**：存储B样条局部轨迹
- **时间管理**：处理全局时间、局部时间段的映射关系
- **轨迹评估**：提供位置、速度、加速度的查询接口
- **轨迹分段**：支持按半径或持续时间提取轨迹段

#### **数据结构**：
- `PlanParameters`：规划算法参数（速度、加速度限制等）
- `LocalTrajData`：单条局部轨迹信息
- `OneTrajDataOfSwarm` / `SwarmTrajData`：多机协同轨迹数据

### 关键技术：
- 多项式轨迹与B样条轨迹的混合管理
- 时间戳管理和时间区间映射
- 轨迹导数计算（速度、加速度）

## 3. **polynomial_traj.h / polynomial_traj.cpp**

### 主要功能：
**多项式轨迹生成和评估** - 实现多项式轨迹的数学计算

### 核心能力：
- **轨迹生成**：通过控制点生成平滑的多项式轨迹
- **轨迹评估**：计算任意时间点的位置、速度、加速度
- **时间管理**：轨迹时间归一化和分段管理
- **导数计算**：自动计算轨迹的一阶、二阶导数

### 数学基础：
- 使用多项式函数表示轨迹：`p(t) = a₀ + a₁t + a₂t² + ...`
- 支持高阶多项式拟合
- 保证轨迹的光滑性（C²连续）

## 文件间的协作关系：

```
plan_container.h (数据管理)
    ↓
polynomial_traj.h (轨迹计算) 
    ↓
planning_visualization.h (结果显示)
```

### 工作流程：
1. **规划器** → 生成轨迹数据 → 存入 `GlobalTrajData`
2. **GlobalTrajData** → 调用 `PolynomialTraj` → 进行轨迹计算
3. **PlanningVisualization** → 从容器获取数据 → 在RViz中可视化显示

## 在FAST-Drone系统中的作用：

这些文件构成了轨迹规划模块的**基础设施层**，提供：

- **数据持久化**：统一管理轨迹数据的生命周期
- **数学计算**：提供轨迹插值、求导等数学工具
- **调试支持**：通过可视化快速验证规划结果
- **模块解耦**：使规划算法与数据管理、显示逻辑分离

这些工具类让上层规划算法（如A*、优化器等）可以专注于核心算法逻辑，而不需要关心数据的存储、计算和显示细节。